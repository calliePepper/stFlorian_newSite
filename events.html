<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
        <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />         
        <title>Barony of St Florian de la Riviere</title>
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <link href="css/style.css" rel="stylesheet" type="text/css" />
        <link href="css/jquery.fs.shifter.css" rel="stylesheet">
        <script src="script/modernizr.custom.63321.js"></script>
        <script type="text/javascript" src="script/jquery.min.js"></script>
        <script src="script/jquery.fs.shifter.js"></script>
        <script type="text/javascript" src="script/moment-with-locales.min.js"></script>
    </head>
    <body class="shifter"> 
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 0 0" xml:space="preserve" style='visibility:hidden;position:absolute;'>
             <defs>
                <lineargradient id="navFill" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="5%" stop-color="#9C774E"></stop><stop offset="95%" stop-color="#72634E"></stop></lineargradient>
                <filter id='inset-shadow'><!-- Shadow Offset --><feOffset  dx='0'  dy='0'/><!-- Shadow Blur --><feGaussianBlur  stdDeviation='2'  result='offset-blur'/><!-- Invert the drop shadow     to create an inner shadow --><feComposite  operator='out'  in='SourceGraphic'  in2='offset-blur'  result='inverse'/><!-- Color & Opacity --><feFlood  flood-color='black'  flood-opacity='1'  result='color'/><!-- Clip color inside shadow --><feComposite  operator='in'  in='color'  in2='inverse'  result='shadow'/><!-- Put shadow over original object --><feComposite  operator='over'  in='shadow'  in2='SourceGraphic'/></filter>
                <path id="buttonyCross" fill-rule="evenodd" clip-rule="evenodd" d="M98,61c-0.8,0-1.6-0.1-2.3-0.4c0.2,0.6,0.3,1.3,0.3,1.9c0,4.1-3.4,7.5-7.5,7.5c-4.1,0-7.5-3.4-7.5-7.5c0-1.3,0.3-2.5,0.9-3.5H59v22.9c1-0.6,2.2-0.9,3.5-0.9c4.1,0,7.5,3.4,7.5,7.5S66.6,96,62.5,96c-0.7,0-1.3-0.1-1.9-0.3c0.3,0.7,0.4,1.5,0.4,2.3c0,4.1-3.9,8-8,8s-8-3.9-8-8c0-0.8,0.1-1.6,0.4-2.3c-0.6,0.2-1.3,0.3-1.9,0.3c-4.1,0-7.5-3.4-7.5-7.5s3.4-7.5,7.5-7.5c1.3,0,2.5,0.3,3.5,0.9V59H24.1c0.6,1,0.9,2.2,0.9,3.5c0,4.1-3.4,7.5-7.5,7.5S10,66.6,10,62.5c0-0.7,0.1-1.3,0.3-1.9C9.6,60.8,8.8,61,8,61c-4.1,0-8-3.9-8-8s3.9-8,8-8c0.8,0,1.6,0.1,2.3,0.4c-0.2-0.6-0.3-1.3-0.3-1.9c0-4.1,3.4-7.5,7.5-7.5s7.5,3.4,7.5,7.5c0,1.3-0.3,2.5-0.9,3.5H47V24.1c-1,0.6-2.2,0.9-3.5,0.9c-4.1,0-7.5-3.4-7.5-7.5s3.4-7.5,7.5-7.5c0.7,0,1.3,0.1,1.9,0.3C45.2,9.6,45,8.8,45,8c0-4.1,3.9-8,8-8s8,3.9,8,8c0,0.8-0.1,1.6-0.4,2.3c0.6-0.2,1.3-0.3,1.9-0.3c4.1,0,7.5,3.4,7.5,7.5S66.6,25,62.5,25c-1.3,0-2.5-0.3-3.5-0.9V47h22.9c-0.6-1-0.9-2.2-0.9-3.5c0-4.1,3.4-7.5,7.5-7.5c4.1,0,7.5,3.4,7.5,7.5c0,0.7-0.1,1.3-0.3,1.9c0.7-0.3,1.5-0.4,2.3-0.4c4.1,0,8,3.9,8,8S102.1,61,98,61z"/>
            </def>
        </svg>
        <div id='fadeIn'>
            <div id='outClicker'> </div>
            <div class="infoBox" id="calenderPop">
                <div id="topOfThePops"><img src="img/scrollTop.png" alt="top of the scroll" /></div>
                <div id="eventinfo">
                    <div id="closeThis">X</div>
                    <h2 id="titlePop"></h2>
                    <table id="eventTable">
                        <tr><td class="label">Group</td><td id="groupPop"></td></tr>
                        <tr><td class="label">Event Time</td><td id="timePop"></td></tr>
                        <tr><td class="label">Location</td><td id="locPop"></td></tr>
                        <tr><td class="label">Description</td><td id="descPop"></td></tr>
                    </table>
                </div>
                <div id="bottomOfThePops"><img src="img/scrollBt.png" alt="top of the scroll" /></div>
            </div>
            <div class="infoBox" id="loadingCalendar">
                Loading...
            </div>
        </div>
        <div class='page-wrap'>
            <header>
                <div id='leatherBand'>
                    <div class='centreThings'>
                        <span class="shifter-handle">Menu</span>
                        <img src='img/shield2.png' id='shieldImage' />
                        <div id='titleAndNav'>
                            <div id='title' class='stampText'>St Florian de la Riviere</div>
                            <nav class='normal-navigation'>
                                <a class='navLink stampText' href='index.html'>Home</a>
                                    <svg  class='navSpacer' viewBox = "0 0 106 106" version = "1.1"><use class='stampSvg' x = "0" y = "0" xlink:href = "#buttonyCross"/></svg>
                                <a class='navLink stampText currentPage' href='events.html'>Events</a>
                                    <svg  class='navSpacer' viewBox = "0 0 106 106" version = "1.1"><use class='stampSvg' x = "0" y = "0" xlink:href = "#buttonyCross"/></svg>
                                <a class='navLink stampText' href='combat.html'>Combat</a>
                                    <svg  class='navSpacer' viewBox = "0 0 106 106" version = "1.1"><use class='stampSvg' x = "0" y = "0" xlink:href = "#buttonyCross"/></svg>
                                <a class='navLink stampText' href='artsAndScience.html'>Arts &amp; Science</a>
                                    <svg  class='navSpacer' viewBox = "0 0 106 106" version = "1.1"><use class='stampSvg' x = "0" y = "0" xlink:href = "#buttonyCross"/></svg>
                                <!--<a class='navLink stampText' href='photos.html'>Photos</a>
                                    <svg  class='navSpacer' viewBox = "0 0 106 106" version = "1.1"><use class='stampSvg' x = "0" y = "0" xlink:href = "#buttonyCross"/></svg>
                                <a class='navLink stampText' href='articles.html'>Articles</a> 
                                    <svg  class='navSpacer' viewBox = "0 0 106 106" version = "1.1"><use class='stampSvg' x = "0" y = "0" xlink:href = "#buttonyCross"/></svg>-->
                                <a class='navLink stampText' href='contact.html'>Contact Us</a>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
            <div id='mainContent' class='shifter-page'>
                <nav class="shifter-navigation">
                    <a class='mobileNavLink stampText' href='index.html'>Home</a><br />
                    <a class='mobileNavLink stampText currentPage' href='events.html'>Events</a><br />
                    <a class='mobileNavLink stampText' href='combat.html'>Combat</a><br />
                    <a class='mobileNavLink stampText' href='artsAndScience.html'>Arts &amp; Science</a><br />
                    <!--<a class='mobileNavLink stampText' href='photos.html'>Photos</a><br />
                        <a class='mobileNavLink stampText' href='articles.html'>Articles</a><br />-->
                    <a class='mobileNavLink stampText' href='contact.html'>Contact Us</a>
                </nav>
                <div class='centreThings calendarCover'>
                    <!--<div class="custom-header clearfix">
                        <h2>St Florian Events</h2>
                        <h3 class="custom-month-year">
                            <span id="custom-month" class="custom-month"></span>
                            <span id="custom-year" class="custom-year"></span>
                            <nav>
                                <span id="custom-prev" class="custom-prev"></span>
                                <span id="custom-next" class="custom-next"></span>
                                <span id="custom-current" class="custom-current" title="Got to current date"></span>
                            </nav>
                        </h3>
                    </div>-->
                    <div id="calendar" class="fc-calendar-container"></div>
                </div>
            </div>
        </div>
        <footer>
            <div class='centreThings'>
                <div class='littleTab facebookTab'>
                    <a href="https://www.facebook.com/groups/4796583557/"><img src='img/facebookIcon.png' alt='facebook icon' />| Facebook</a>
                </div>
                <div class='littleTab calTab'>
                    <a href="https://www.google.com/calendar/embed?src=qeubvk1i1niodt7q0qn4ph5lbs%40group.calendar.google.com&ctz=Australia/Brisbane"><img src='img/calIcon.png' alt='facebook icon' />| Google Cal</a>
                </div>
                <div id='disclaimer'>
                    <p>Disclaimer: This is the official site for St Florian, containing information for its members and friends of the group. This is not an official SCA publication, please refer to the Lochac Kingdom site for corporate information. All images and content are copyright their respective owners, and where possible the original contributers have been acknowledged. Please refer to the Copyright page for further information or contact the webmaster.</p>
                </div>
                <div id='allTheSocials'>
                    <p>Webmaster:  webmaster@stflorian.com.au<span class='removeThisSmall'><br /></span>
                    Senschal: seneschal@stflorian.com.au</p>
                </div>
            </div>
        </footer>
        <script type="text/javascript" src="script/customFullCalendar.js"></script>
        <script type="text/javascript" src="script/data.js"></script>
        <script type='text/javascript' src='script/gcal.js'></script>
        <script type="text/javascript"> 
        var codropsEvents = {};
        var looperEvents = 0;
        var test;



        function bindEvents() {
            $('.calendarObject').each(function() {
                $(this).on('click touch', function() {
                    $('html').css('overflow','hidden');
                    var thisId = $(this).attr('id').replace('calendarObject_','');
                    var eventName = $('#additional_'+thisId).find('.name').html();
                    var eventDesc = $('#additional_'+thisId).find('.description').html();
                    var eventLocation = $('#additional_'+thisId).find('.location').html();
                    var eventStart = $('#additional_'+thisId).find('.startDate').html();
                    var eventEnd = $('#additional_'+thisId).find('.endTime').html();
                    var createdOn = $('#additional_'+thisId).find('.createdTime').html();
                    var lastUpdated = $('#additional_'+thisId).find('.updatedTime').html();

                    if (moment(event['start']['_d']).zone('1200').format('HH') == '00') {
                        $('#timePop').html(eventStart + ' - ' + eventEnd);
                    } else {
                        $('#timePop').html(moment(event['start']['_d']).zone('1200').format('DD/MM/YYYY') + ' - ' + moment(event['end']['_d']).zone('-1200').format('DD/MM/YYYY'));
                    }

                    var formTitle = eventName.substring(4);

                    var groupName;
                    if (eventName.substring(0, 2) == "SF") {
                        groupName = 'St Florian';
                    } else if (eventName.substring(0, 2) == "RH") {
                        groupName = 'Riverhaven';
                    } else if (eventName.substring(0, 2) == "ST") {
                        groupName = 'Stegby';
                    } else if (eventName.substring(0, 2) == "LO") {
                        groupName = 'Non Northern event';
                    } else {
                        formTitle = eventName;
                        groupName = 'Shared event';
                    }

                    $('#titlePop').html(formTitle);
                    $('#groupPop').html(groupName);
                    $('#descPop').html(eventDesc);
                    $('#locPop').html(eventLocation);
                    $('#createdPop').html(moment(createdOn).format('HH:MM DD/MM/YYYY'));
                    $('#updatedPop').html(moment(lastUpdated).format('HH:MM DD/MM/YYYY'));
                    $('#fadeIn').show();
                    $('#calenderPop').show();
                    var heightTime = $('#eventTable').height() + $('#titlePop').height() + $('#extraData').height() + 60;
                    var win = $(window).height();
                    $('#calenderPop').height(heightTime);
                });
            });
        }
        $('#outClicker').on('click touch', function() {
                        $('#fadeIn').hide();
                        $('html').css('overflow','auto');
        });
        $('#closeThis').on('click touch', function() {
                        $('#fadeIn').hide();
                        $('html').css('overflow','auto');
        });
            $(function() {
                $.shifter();

          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-40923417-1', 'new-growth.com');
          ga('send', 'pageview');
          
                /*var codropsEvents = {
                    '01-01-2013' : '<span>New Year\'s day</span>',
                    '11-23-2012' : '<a href="http://tympanus.net/codrops/2012/11/23/three-script-updates/">Three Script Updates</a>',
                    '11-21-2012' : '<a href="http://tympanus.net/codrops/2012/11/21/adaptive-thumbnail-pile-effect-with-automatic-grouping/">Adaptive Thumbnail Pile Effect with Automatic Grouping</a>',
                    '11-20-2012' : '<a href="http://tympanus.net/codrops/2012/11/20/learning-principles-for-improving-your-css/">Learning Principles for Improving Your CSS</a>',
                    '11-19-2012' : '<a href="http://tympanus.net/codrops/2012/11/19/responsive-css-timeline-with-3d-effect/">Responsive CSS Timeline with 3D Effect</a>',
                    '11-14-2012' : '<a href="http://tympanus.net/codrops/2012/11/14/creative-css-loading-animations/">Creative CSS Loading Animations</a>',
                    '11-13-2012' : '<a href="http://tympanus.net/codrops/2012/11/13/baraja-a-plugin-for-spreading-items-in-a-card-like-fashion/">Baraja: A Plugin for Spreading Items in a Card-Like Fashion</a>',
                    '11-12-2012' : '<a href="http://tympanus.net/codrops/2012/11/12/mobile-design-typography-is-vitally-important-and-challenging/">Mobile Design Typography is Vitally Important â€¦ and Challenging</a>',
                    '11-09-2012' : '<a href="http://tympanus.net/codrops/2012/11/09/responsive-wordpress-theme-giveaway/">Responsive WordPress Theme Giveaway</a>'
                };*/

         /*       $.ajax({   
                    type: "GET",
                    url: "https://www.googleapis.com/calendar/v3/calendars/qeubvk1i1niodt7q0qn4ph5lbs%40group.calendar.google.com/events?fields=description%2Citems(status%2CoriginalStartTime%2Ctransparency%2Clocked%2Ccreator%2Cdescription%2ChtmlLink%2CrecurringEventId%2Cetag%2Csequence%2Crecurrence%2Cupdated%2Ccreated%2Csummary%2Clocation%2CiCalUID%2Cvisibility%2Cstart%2Cend%2Cid)%2CnextSyncToken%2Csummary&key=AIzaSyC6Z-3Nndhoz-hNqrR9cjRgWMiwGJMX-dU",
                    dataType: "JSON",
                    async: true,
                    success:function(data){  
                        console.log(data);
                        $.each(data['items'], function(index,value) {
                            looperEvents++;
                            var thisMoment = moment(value.start.dateTime);
                            codropsEvents[moment(thisMoment).format('MM-DD-YYYY')] = '<div class="calendarObject" id="calendarObject_'+looperEvents+'"">'+value.summary+'<div class="additionalEvent" id="additional_'+looperEvents+'"><span class="name">'+value.summary+'</span><span class="description">'+value.description.replace(/(?:\r\n|\r|\n)/g, '<br />')+'</span><span class="location">'+value.location+'</span><span class="startDate">'+value.start.dateTime+'</span><span class="endTime">'+value.end.dateTime+'</span><span class="createdTime">'+value.created+'</span><span class="updatedTime">'+value.updated+'</span></div></div>';
                        });
                        var cal = $( '#calendar' ).calendario( {
                                caldata : codropsEvents
                            } ),
                            $month = $( '#custom-month' ).html( cal.getMonthName() ),
                            $year = $( '#custom-year' ).html( cal.getYear() );

                            $( '#custom-next' ).on( 'click', function() {
                            cal.gotoNextMonth( updateMonthYear );
                            bindEvents();
                        } );
                        $( '#custom-prev' ).on( 'click', function() {
                            cal.gotoPreviousMonth( updateMonthYear );
                            bindEvents();
                        } );
                        $( '#custom-current' ).on( 'click', function() {
                            cal.gotoNow( updateMonthYear );
                            bindEvents();
                        } );

                        function updateMonthYear() {                
                            $month.html( cal.getMonthName() );
                            $year.html( cal.getYear() );
                            bindEvents();
                        }
                        bindEvents();
                        $('#loadingCalendar').hide();
                        $('#fadeIn').hide();
                    },
                    error: function (request, status, error) {
                        emailAjaxCheck = 0;
                        console.log(request);
                    }                   
                });*/

            
            $('#calendar').fullCalendar({
                    header: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'month,agendaList'
                    },

                    googleCalendarApiKey: 'AIzaSyC6Z-3Nndhoz-hNqrR9cjRgWMiwGJMX-dU',
                    events: {
                        googleCalendarId: 'qeubvk1i1niodt7q0qn4ph5lbs@group.calendar.google.com',
                        className: 'gcal-event' // an option!
                    },
                    eventRender: function( event, element, view ) { 
                         if (event.title.substring(0, 2) == "SF") {
                             element.css('background', '#80267f');
                         } else if (event.title.substring(0, 2) == "RH") {
                             element.css('background', '#003366');
                             element.css('color', '#f3b329');
                         } else if (event.title.substring(0, 2) == "ST") {
                             element.css('background', '#ffe900');
                             element.css('color', 'black');
                         } else if (event.title.substring(0, 2) == "LO") {
                             element.css('background', 'white');
                             element.css('color', 'blue');
                         }
                    },
                    timeFormat: {
                       agenda: 'HH:mm'
                    },
                     eventClick: function( event, jsEvent, view ) {
                        console.log(jsEvent)
                        if ($('#calendar').fullCalendar( 'getView' ).name == 'agendaList')  {
                            if ($(jsEvent.currentTarget).find('.fc-eventlist-desc').is(":visible")) {
                                $('.fc-eventlist-desc').hide( "fast" );
                                $('.fc-eventlist-loc').removeClass('opened');
                            } else {
                                $('.fc-eventlist-desc').hide( "fast" );
                                $('.fc-eventlist-loc').removeClass('opened');
                                $(jsEvent.currentTarget).find('.fc-eventlist-desc').show( "fast" );
                                $(jsEvent.currentTarget).find('.fc-eventlist-loc').addClass('opened');
                            }
                        } else if ($('#calendar').fullCalendar( 'getView' ).name == 'month')  {
                            $('html').css('overflow','hidden');
                            var thisId = event['_id'];
                            var eventName = event['title'];
                            var eventDesc = event['description'].replace(/(?:\r\n|\r|\n)/g, '<br />');
                            var eventLocation = event['location']
                            var eventStart = moment(event['start']['_d']).zone('1200').format('HH:mm DD/MM/YYYY');
                            var eventEnd = moment(event['end']['_d']).zone('1200').format('HH:mm DD/MM/YYYY');
                            //var createdOn = moment(event['start']['_d']).format('MM-DD-YYYY');
                            //var lastUpdated = moment(event['start']['_d']).format('MM-DD-YYYY');;
                            

                            var formTitle = eventName.substring(4);

                            var groupName;
                            if (eventName.substring(0, 2) == "SF") {
                                groupName = 'St Florian';
                            } else if (eventName.substring(0, 2) == "RH") {
                                groupName = 'Riverhaven';
                            } else if (eventName.substring(0, 2) == "ST") {
                                groupName = 'Stegby';
                            } else if (eventName.substring(0, 2) == "LO") {
                                groupName = 'Non Northern event';
                            } else {
                                formTitle = eventName;
                                groupName = 'Shared event';
                            }

                            $('#titlePop').html(formTitle);
                            $('#groupPop').html(groupName);

                            console.log(moment(event['start']['_d']).zone('1200').format('HH'));

                            if (moment(event['start']['_d']).zone('1200').format('HH') != '00') {
                                $('#timePop').html(eventStart + ' - ' + eventEnd);
                            } else {
                                $('#timePop').html(moment(event['start']['_d']).zone('1200').format('DD/MM/YYYY') + ' - ' + moment(event['end']['_d']).zone('-1200').format('DD/MM/YYYY'));
                            }
                            
                            $('#descPop').html(eventDesc);
                            $('#locPop').html(eventLocation);
                            //$('#createdPop').html(moment(createdOn).format('HH:MM DD/MM/YYYY'));
                            //$('#updatedPop').html(moment(lastUpdated).format('HH:MM DD/MM/YYYY'));
                            $('#fadeIn').show();
                            $('#calenderPop').show();
                            var heightTime = $('#eventTable').height() + $('#titlePop').height() + $('#extraData').height() + 60;
                            var win = $(window).height();
                            $('#calenderPop').height(heightTime);
                        }
                        if (event.url) {
                            return false;
                        }
                    }
                });

                if ($(window).width() < 960) {
                   $('#calendar').fullCalendar('changeView', 'agendaList');
                }
                        $('#loadingCalendar').hide();
                        $('#fadeIn').hide();

            });

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67268702-1', 'auto');
  ga('send', 'pageview');

        </script>
    </body>	
</html>